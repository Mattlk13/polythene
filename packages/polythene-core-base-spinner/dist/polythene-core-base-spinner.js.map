{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize, transitionStateReducer } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst showSpinner = opts =>\n  transitionComponent({\n    ...opts,\n    isShow: true\n  });\n\n// const hideSpinner = opts =>\n//   transitionComponent({\n//     ...opts,\n//     isShow: false\n//   });\n\nconst initialTransitionState = {\n  isVisible: false,\n  isTransitioning: false,\n  isHiding: false,\n};\n\nexport const _BaseSpinner = ({ h, a, useReducer, useState, useEffect, getRef, Shadow, ...props }) => {\n  const [transitionState, dispatchTransitionState] = useReducer(transitionStateReducer, initialTransitionState);\n  const [domElement, setDomElement] = useState();\n\n  const isVisible = (transitionState || initialTransitionState).isVisible;\n\n  const transitionOptions = {\n    dispatchTransitionState,\n    props,\n    domElements: {\n      el: domElement,\n    },\n    showClass: classes.visible\n  };\n\n  useEffect(\n    () => {\n      if (!domElement) {\n        return;\n      }\n      if (!props.permanent) {\n        showSpinner(transitionOptions);\n      }\n    },\n    [domElement]\n  );\n\n  const componentProps = Object.assign(\n    {}, \n    filterSupportedAttributes(props),\n    getRef(dom => dom && !domElement && (\n      setDomElement(dom),\n      props.ref && props.ref(dom)\n    )),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.component,\n        props.instanceClass,\n        classForSize(classes, props.size),\n        props.singleColor ? classes.singleColor: null,\n        props.raised ? classes.raised : null,\n        props.animated ? classes.animated : null,\n        props.permanent ? classes.permanent : null,\n        isVisible ? classes.visible : null,\n        props.className || props[a.class],\n      ].join(\" \"),\n    },\n    props.events\n  );\n\n  const content = [\n    props.before,\n    props.content,\n    props.after\n  ];\n\n  if (props.raised && content.length > 0) {\n    content.push(h(Shadow, { shadowDepth: props.shadowDepth }))\n  }\n\n  return h(\"div\",\n    componentProps,\n    content \n  );\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","showSpinner","opts","transitionComponent","isShow","initialTransitionState","isVisible","isTransitioning","isHiding","h","a","useReducer","useState","useEffect","getRef","Shadow","props","transitionStateReducer","transitionState","dispatchTransitionState","domElement","setDomElement","transitionOptions","domElements","el","showClass","classes","componentProps","_extends","filterSupportedAttributes","dom","ref","testId","className","instanceClass","classForSize","size","join","events","content","before","after","length","push","shadowDepth"],"mappings":"yjDACe,CACbA,UAAa,aAGbC,UAAa,wBACbC,YAAa,0BAGbC,SAAa,uBACbC,IAAa,kBACbC,MAAa,oBACbC,OAAa,qBACbC,UAAa,wBACbC,OAAa,qBACbC,QAAa,sBACbC,YAAa,2BACbC,MAAa,oBACbC,QAAa,uBCfTC,EAAc,SAAAC,UAClBC,yWACKD,GACHE,QAAQ,MASNC,EAAyB,CAC7BC,WAAW,EACXC,iBAAiB,EACjBC,UAAU,kBAGgB,gBAAGC,IAAAA,EAAGC,IAAAA,EAAGC,IAAAA,WAAYC,IAAAA,SAAUC,IAAAA,UAAWC,IAAAA,OAAQC,IAAAA,OAAWC,2EACpCL,EAAWM,yBAAwBZ,MAA/Ea,OAAiBC,WACYP,OAA7BQ,OAAYC,OAEbf,GAAaY,GAAmBb,GAAwBC,UAExDgB,EAAoB,CACxBH,wBAAAA,EACAH,MAAAA,EACAO,YAAa,CACXC,GAAIJ,GAENK,UAAWC,EAAQ1B,SAGrBa,GACE,WACOO,IAGAJ,EAAMrB,WACTM,EAAYqB,MAGhB,CAACF,QAGGO,EAAiBC,EACrB,GACAC,4BAA0Bb,GAC1BF,GAAO,SAAAgB,UAAOA,IAAQV,IACpBC,EAAcS,GACdd,EAAMe,KAAOf,EAAMe,IAAID,OAEzBd,EAAMgB,QAAU,gBAAkBhB,EAAMgB,QACxC,CACEC,UAAW,CACTP,EAAQtC,UACR4B,EAAMkB,cACNC,eAAaT,EAASV,EAAMoB,MAC5BpB,EAAMlB,YAAc4B,EAAQ5B,YAAa,KACzCkB,EAAMpB,OAAS8B,EAAQ9B,OAAS,KAChCoB,EAAMzB,SAAWmC,EAAQnC,SAAW,KACpCyB,EAAMrB,UAAY+B,EAAQ/B,UAAY,KACtCW,EAAYoB,EAAQ1B,QAAU,KAC9BgB,EAAMiB,WAAajB,EAAMN,UACzB2B,KAAK,MAETrB,EAAMsB,QAGFC,EAAU,CACdvB,EAAMwB,OACNxB,EAAMuB,QACNvB,EAAMyB,cAGJzB,EAAMpB,QAAU2C,EAAQG,OAAS,GACnCH,EAAQI,KAAKlC,EAAEM,EAAQ,CAAE6B,YAAa5B,EAAM4B,eAGvCnC,EAAE,MACPkB,EACAY"}