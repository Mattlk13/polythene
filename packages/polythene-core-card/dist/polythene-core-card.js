!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e=e||self).polythene={},e["polythene-core"])}(this,(function(e,t){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function r(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){i=!0,n=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw n}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o={component:"pe-card",actions:"pe-card__actions",any:"pe-card__any",content:"pe-card__content",header:"pe-card__header",headerTitle:"pe-card__header-title",media:"pe-card__media",mediaDimmer:"pe-card__media__dimmer",overlay:"pe-card__overlay",overlayContent:"pe-card__overlay__content",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",subtitle:"pe-card__subtitle",text:"pe-card__text",title:"pe-card__title",actionsBorder:"pe-card__actions--border",actionsHorizontal:"pe-card__actions--horizontal",actionsJustified:"pe-card__actions--justified",actionsTight:"pe-card__actions--tight",actionsVertical:"pe-card__actions--vertical",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",mediaOriginStart:"pe-card__media--origin-start",mediaOriginCenter:"pe-card__media--origin-center",mediaOriginEnd:"pe-card__media--origin-end",mediaLarge:"pe-card__media--large",mediaMedium:"pe-card__media--medium",mediaRatioLandscape:"pe-card__media--landscape",mediaRatioSquare:"pe-card__media--square",mediaRegular:"pe-card__media--regular",mediaSmall:"pe-card__media--small",overlaySheet:"pe-card__overlay--sheet",primaryHasMedia:"pe-card__primary--media",primaryTight:"pe-card__primary--tight",textTight:"pe-card__text--tight"},c={landscape:16/9,square:1},s={small:o.mediaSmall,regular:o.mediaRegular,medium:o.mediaMedium,large:o.mediaLarge},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular";return s[e]},l="pe-button-row",u={horizontal:o.actionsHorizontal,vertical:o.actionsVertical,justified:o.actionsJustified},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal";return u[e]};e._Card=function(e){var i=e.h,c=e.a,s=e.CardActions,d=e.CardMedia,l=e.CardPrimary,u=e.Icon,p=e.ListTile,m=e.Shadow,h=r(e,["h","a","CardActions","CardMedia","CardPrimary","Icon","ListTile","Shadow"]),y=a({},t.filterSupportedAttributes(h),h.testId&&{"data-test-id":h.testId},{className:[o.component,"dark"===h.tone?"pe-dark-tone":null,"light"===h.tone?"pe-light-tone":null,h.className||h[c.class]].join(" ")},h.url,h.events),f=Array.isArray(h.content)?h.content.map((function e(r){var n=Object.keys(r)[0],m=a({},r[n],{dispatcher:e,key:void 0});switch(n){case"actions":return i(s,m);case"header":return function(e){var t=e.props,r=e.h,i=e.a,n=e.Icon;return r(e.ListTile,a({},t,{className:[o.header,t.className||t[i.class]].join(" ")},t.icon?{front:r(n,t.icon)}:null))}({props:m,h:i,a:c,Icon:u,ListTile:p});case"media":return i(d,m);case"overlay":return function(e){var t=e.dispatcher,a=e.props,r=e.h,i=e.a,n=a.element||"div",c=a.content.map(t);return r("div",{style:a.style,className:[o.overlay,a.sheet?o.overlaySheet:null,"light"===a.tone?null:"pe-dark-tone","light"===a.tone?"pe-light-tone":null].join(" ")},[r(n,{className:[o.overlayContent,a.className||a[i.class]].join(" ")},c),r("div",{className:o.mediaDimmer})])}({dispatcher:e,props:m,h:i,a:c});case"primary":return i(l,m);case"text":return function(e){var r=e.props,i=e.h,n=e.a;return i(r.element||"div",a({},t.filterSupportedAttributes(r),{className:[o.text,r.tight?o.textTight:null,r.className||r[n.class]].join(" ")},r.events),r.content)}({props:m,h:i,a:c});case"any":return function(e){var r=e.props,i=e.h,n=e.a;return i(r.element||"div",a({},t.filterSupportedAttributes(r),{className:[o.any,r.tight?o.textTight:null,r.className||r[n.class]].join(" ")}),r.content)}({props:m,h:i,a:c});default:throw'Content type "'.concat(n,'" does not exist')}})):[h.content],_=[h.before].concat(n(f),[h.after]),v=void 0!==h.shadowDepth?h.shadowDepth:h.z,g=[i(m,{shadowDepth:void 0!==v?v:1,animated:!0}),i("div",{className:o.content},_),h.children],b=h.element||h.url?"a":"div";return i(b,y,g)},e._CardActions=function(e){var i=e.h,n=e.a,c=r(e,["h","a"]),s=a({},t.filterSupportedAttributes(c),c.testId&&{"data-test-id":c.testId},{className:[o.actions,"vertical"!==c.layout?l:null,p(c.layout),c.border||c.bordered?o.actionsBorder:null,c.tight?o.actionsTight:null,c.className||c[n.class]].join(" ")},c.events),d=c.content||c.children;return i(c.element||"div",s,d)},e._CardMedia=function(e){var n=e.h,s=e.a,l=e.useEffect,u=e.useState,p=e.getRef,m=r(e,["h","a","useEffect","useState","getRef"]),h=i(u(),2),y=h[0],f=h[1],_=m.ratio||"landscape";l((function(){if(y){var e=m.ratio||"landscape",t=m.origin||"center",a=y.querySelector("img")||y.querySelector("iframe");!function(e){var t=e.dom,a=e.src,r=e.ratio,i=e.origin,n=new Image;n.onload=function(){"IMG"===n.tagName&&(t.style.backgroundImage="url(".concat(n.src,")"));var e=this.naturalWidth/this.naturalHeight<c[r]?o.mediaCropX:o.mediaCropY;t.classList.add(e);var a="start"===i?o.mediaOriginStart:"end"===i?o.mediaOriginEnd:o.mediaOriginCenter;t.classList.add(a)},n.src=a}({dom:y,src:a.src,ratio:e,origin:t})}}),[y]);var v=a({},t.filterSupportedAttributes(m),p((function(e){return e&&!y&&f(e)})),m.testId&&{"data-test-id":m.testId},{className:[o.media,d(m.size),"landscape"===_?o.mediaRatioLandscape:o.mediaRatioSquare,m.className||m[s.class]].join(" ")},m.events),g=m.dispatcher,b=[m.content,m.overlay?g({overlay:m.overlay}):m.showDimmer&&n("div",{className:o.mediaDimmer})];return n(m.element||"div",v,b)},e._CardPrimary=function(e){var i=e.h,n=e.a,c=r(e,["h","a"]),s=Array.isArray(c.content)?c.content.reduce((function(e,t){return"media"===Object.keys(t)[0]||e}),!1):c.media||!1,d=a({},t.filterSupportedAttributes(c),c.testId&&{"data-test-id":c.testId},{className:[o.primary,c.tight?o.primaryTight:null,s?o.primaryHasMedia:null,c.className||c[n.class]].join(" ")},c.events),l=c.dispatcher,u={title:function(e){return e.attrs||e.props?e||e.props:i("div",{className:o.title,style:e.style},[e.title,e.subtitle?i("div",{className:o.subtitle},e.subtitle):null])},media:function(e){return i("div",{className:o.primaryMedia,style:e.style},l({media:e}))},actions:function(e){return l({actions:e})}},p=Array.isArray(c.content)?c.content.map((function(e){var t=Object.keys(e)[0],a=e[t];return u[t]?u[t](a):e})):[c.title?u.title({title:c.title,subtitle:c.subtitle}):null,c.media?u.media(c.media):null,c.actions?u.actions(c.actions):null,c.content];return i(c.element||"div",d,p)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-card.js.map
