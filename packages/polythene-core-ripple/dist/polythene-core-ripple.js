!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t((e=e||self).polythene={},e["polythene-core"],e["polythene-theme"])}(this,(function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=t.getAnimationEndEvent(),c=function(e){var r=e.e,i=e.id,o=e.el,c=e.props,s=e.classes;return new Promise((function(e){var u=document.createElement("div");u.setAttribute("class",s.mask),o.appendChild(u);var l=document.createElement("div");l.setAttribute("class",s.waves),u.appendChild(l);var p=o.getBoundingClientRect(),d=t.isTouch&&r.touches?r.touches[0].pageX:r.clientX,f=t.isTouch&&r.touches?r.touches[0].pageY:r.clientY,m=o.offsetWidth,v=o.offsetHeight,h=Math.sqrt(m*m+v*v),y=c.center?p.left+p.width/2:d,g=c.center?p.top+p.height/2:f,w=y-p.left-h/2,E=g-p.top-h/2,b=void 0!==c.startOpacity?c.startOpacity:.2,O=void 0!==c.opacityDecayVelocity?c.opacityDecayVelocity:.35,_=c.endOpacity||0,A=c.startScale||.1,S=c.endScale||2,x=c.duration?c.duration:1/O*.2,C=window.getComputedStyle(o).color,j=l.style;j.width=j.height=h+"px",j.top=E+"px",j.left=w+"px",j["animation-duration"]=j["-webkit-animation-duration"]=j["-moz-animation-duration"]=j["-o-animation-duration"]=x+"s",j.backgroundColor=C,j.opacity=b,j.animationName=i,j.animationTimingFunction=c.animationTimingFunction||n.vars.animation_curve_default;var k="@keyframes ".concat(i," {\n      0% {\n        transform:scale(").concat(A,");\n        opacity: ").concat(b,"\n      }\n      100% {\n        transform:scale(").concat(S,");\n        opacity: ").concat(_,";\n      }\n    }");!function(e,n){if(!t.isServer){var r=window.document,i=r.createElement("style");i.setAttribute("id",e),i.appendChild(r.createTextNode(n)),r.head.appendChild(i)}}(i,k);l.addEventListener(a,(function n(r){!function(e){if(!t.isServer){var n=document.getElementById(e);n&&n.parentNode&&n.parentNode.removeChild(n)}}(i),l.removeEventListener(a,n,!1),c.persistent?(j.opacity=_,j.transform="scale("+S+")"):(l.classList.remove(s.wavesAnimating),u.removeChild(l),o.removeChild(u)),e(r)}),!1),l.classList.add(s.wavesAnimating)}))},s={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",unconstrained:"pe-ripple--unconstrained",wavesAnimating:"pe-ripple__waves--animating"};e._Ripple=function(e){var n=e.h,a=e.a,u=e.getRef,l=e.useRef,p=e.useState,d=e.useEffect,f=i(e,["h","a","getRef","useRef","useState","useEffect"]),m=o(p(),2),v=m[0],h=m[1],y=l(),g=f.target||(v?v.parentElement:void 0),w=function(e){if(!(f.disabled||!v||!f.multi&&y.current>0)){f.start&&f.start(e);var t="ripple_animation_".concat((new Date).getTime());c({e:e,id:t,el:v,props:f,classes:s}).then((function(e){f.end&&f.end(e),y.current--})),y.current++}};d((function(){y.current=0}),[]),d((function(){if(g&&g.addEventListener)return t.pointerEndEvent.forEach((function(e){return g.addEventListener(e,w,!1)})),function(){t.pointerEndEvent.forEach((function(e){return g.removeEventListener(e,w,!1)}))}}),[g]);var E=r({},t.filterSupportedAttributes(f),u((function(e){return e&&!v&&h(e)})),f.testId&&{"data-test-id":f.testId},{className:[s.component,f.unconstrained?s.unconstrained:null,"dark"===f.tone?"pe-dark-tone":null,"light"===f.tone?"pe-light-tone":null,f.className||f[a.class]].join(" ")}),b=[f.before,f.after];return n(f.element||"div",E,b)},e.rippleAnimation=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core-ripple.js.map
